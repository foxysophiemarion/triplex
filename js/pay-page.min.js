import"./app.min.js";(function(){const p="cart",E="cart_selected",n=document.querySelector(".cart-total"),r=document.querySelector(".total-product .cart-total"),l=document.querySelector(".delivery-total"),a=document.querySelector(".promo__input"),u=document.querySelector(".promo__apply");let d=null;function S(){try{return JSON.parse(localStorage.getItem(p))||[]}catch{return[]}}function m(){try{return JSON.parse(localStorage.getItem(E))||[]}catch{return[]}}function c(t){return(t||0).toLocaleString("ru-RU")+" \u20BD"}function s(){const t=S(),f=m();let e=t.filter((i,o)=>f[o]).reduce((i,o)=>i+o.qty*o.price,0);d==="SALE10"&&(e=Math.round(e*.9));const y=e+500;r&&(r.textContent=c(e)),l&&(l.textContent=c(500)),n&&(n.textContent=c(y))}u&&u.addEventListener("click",()=>{d=(a?.value||"").trim().toUpperCase()==="SALE10"?"SALE10":null,s()}),document.addEventListener("DOMContentLoaded",s)})();
